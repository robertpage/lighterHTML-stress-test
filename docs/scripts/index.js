(()=>{let f$=Object.hasOwnProperty,h$={},j$,k$=a$=>{let b$=h$[a$];return b$||(b$=h$[a$]={exports:{}},j$[a$](b$.exports,b$)),b$.exports},l$=a$=>{if(a$&&a$.__esModule)return a$;let b$={};for(let c$ in a$)f$.call(a$,c$)&&(b$[c$]=a$[c$]);return b$.default=a$,b$},p$=a$=>l$(k$(a$));j$={17(){function w(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if("production"!==process.env.NODE_ENV){var i=zc[a],j=i?"function"==typeof i?i.apply(null,c):i:"unknown error nr: "+a;throw Error("[Immer] "+j)}throw Error("[Immer] minified error nr: "+a+(c.length?" "+c.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function L(a){return!!a&&!!a[t]}function K(a){return!!a&&(function(b){if(!b||"object"!=typeof b)return!1;var c=Object.getPrototypeOf(b);return!c||c===Object.prototype}(a)||Array.isArray(a)||!!a[Wa]||!!a.constructor[Wa]||ra(a)||sa(a))}function rc(a){return L(a)||w(23,a),a[t].t}function R(a,b,c){void 0===c&&(c=!1),0===W(a)?(c?Object.keys:_)(a).forEach(function(d){c&&"symbol"==typeof d||b(d,a[d],a)}):a.forEach(function(d,i){return b(i,d,a)})}function W(a){var b=a[t];return b?b.i>3?b.i-4:b.i:Array.isArray(a)?1:ra(a)?2:sa(a)?3:0}function X(a,b){return 2===W(a)?a.has(b):Object.prototype.hasOwnProperty.call(a,b)}function qa(a,b){return 2===W(a)?a.get(b):a[b]}function tb(a,b,c){var d=W(a);2===d?a.set(b,c):3===d?(a.delete(b),a.add(c)):a[b]=c}function ub(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}function ra(a){return xc&&a instanceof Map}function sa(a){return yc&&a instanceof Set}function x(a){return a.o||a.t}function La(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var b=Fb(a);delete b[t];for(var c=_(b),d=0;d<c.length;d++){var i=c[d],j=b[i];!1===j.writable&&(j.writable=!0,j.configurable=!0),(j.get||j.set)&&(b[i]={configurable:!0,writable:!0,enumerable:j.enumerable,value:a[i]})}return Object.create(Object.getPrototypeOf(a),b)}function Ma(a,b){Na(a)||L(a)||!K(a)||(W(a)>1&&(a.set=a.add=a.clear=a.delete=sc),Object.freeze(a),b&&R(a,function(c,d){return Ma(d,!0)},!0))}function sc(){w(2)}function Na(a){return null==a||"object"!=typeof a||Object.isFrozen(a)}function S(a){var b=Gb[a];return b||w("production"!==process.env.NODE_ENV?18:19,a),b}function Oa(a,b){Gb[a]=b}function fa(){return"production"===process.env.NODE_ENV||Z||w(0),Z}function Pa(a,b){b&&(S("Patches"),a.u=[],a.s=[],a.v=b)}function ta(a){Qa(a),a.p.forEach(tc),a.p=null}function Qa(a){a===Z&&(Z=a.l)}function vb(a){return Z={p:[],l:Z,h:a,m:!0,_:0}}function tc(a){var b=a[t];0===b.i||1===b.i?b.j():b.g=!0}function Ra(a,b){b._=b.p.length;var c=b.p[0],d=void 0!==a&&a!==c;return b.h.O||S("ES5").S(b,a,d),d?(c[t].P&&(ta(b),w(4)),K(a)&&(a=ua(b,a),b.l||va(b,a)),b.u&&S("Patches").M(c[t],a,b.u,b.s)):a=ua(b,c,[]),ta(b),b.u&&b.v(b.u,b.s),a!==Va?a:void 0}function ua(a,b,c){if(Na(b))return b;var d=b[t];if(!d)return R(b,function(j,e){return wb(a,d,b,j,e,c)},!0),b;if(d.A!==a)return b;if(!d.P)return va(a,d.t,!0),d.t;if(!d.I){d.I=!0,d.A._--;var i=4===d.i||5===d.i?d.o=La(d.k):d.o;R(3===d.i?new Set(i):i,function(j,e){return wb(a,d,i,j,e,c)}),va(a,i,!1),c&&a.u&&S("Patches").R(d,c,a.u,a.s)}return d.o}function wb(a,b,c,d,i,j){if("production"!==process.env.NODE_ENV&&i===c&&w(5),L(i)){var e=ua(a,i,j&&b&&3!==b.i&&!X(b.D,d)?j.concat(d):void 0);if(tb(c,d,e),!L(e))return;a.m=!1}if(K(i)&&!Na(i)){if(!a.h.N&&a._<1)return;ua(a,i),b&&b.A.l||va(a,i)}}function va(a,b,c){void 0===c&&(c=!1),a.h.N&&a.m&&Ma(b,c)}function Sa(a,b){var c=a[t];return(c?x(c):a)[b]}function xb(a,b){if(b in a)for(var c=Object.getPrototypeOf(a);c;){var d=Object.getOwnPropertyDescriptor(c,b);if(d)return d;c=Object.getPrototypeOf(c)}}function G(a){a.P||(a.P=!0,a.l&&G(a.l))}function Ta(a){a.o||(a.o=La(a.t))}function ga(a,b,c){var d=ra(b)?S("MapSet").T(b,c):sa(b)?S("MapSet").F(b,c):a.O?function(i,j){var e=Array.isArray(i),g={i:e?1:0,A:j?j.A:fa(),P:!1,I:!1,D:{},l:j,t:i,k:null,o:null,j:null,C:!1},f=g,h=$;e&&(f=[g],h=xa);var k=Proxy.revocable(f,h),l=k.revoke,o=k.proxy;return g.k=o,g.j=l,o}(b,c):S("ES5").J(b,c);return(c?c.A:fa()).p.push(d),d}function yb(a){return L(a)||w(22,a),function b(c){if(!K(c))return c;var d,i=c[t],j=W(c);if(i){if(!i.P&&(i.i<4||!S("ES5").K(i)))return i.t;i.I=!0,d=zb(c,j),i.I=!1}else d=zb(c,j);return R(d,function(e,g){i&&qa(i.t,e)===g||tb(d,e,b(g))}),3===j?new Set(d):d}(a)}function zb(a,b){switch(b){case 2:return new Map(a);case 3:return Array.from(a)}return La(a)}function Ab(){function a(e,g){var f=j[e];return f?f.enumerable=g:j[e]=f={configurable:!0,enumerable:g,get:function(){var h=this[t];return"production"!==process.env.NODE_ENV&&i(h),$.get(h,e)},set:function(h){var k=this[t];"production"!==process.env.NODE_ENV&&i(k),$.set(k,e,h)}},f}function b(e){for(var g=e.length-1;g>=0;g--){var f=e[g][t];if(!f.P)switch(f.i){case 5:d(f)&&G(f);break;case 4:c(f)&&G(f)}}}function c(e){for(var g=e.t,f=e.k,h=_(f),k=h.length-1;k>=0;k--){var l=h[k];if(l!==t){var o=g[l];if(void 0===o&&!X(g,l))return!0;var m=f[l],n=m&&m[t];if(n?n.t!==o:!ub(m,o))return!0}}var p=!!g[t];return h.length!==_(g).length+(p?0:1)}function d(e){var g=e.k;if(g.length!==e.t.length)return!0;var f=Object.getOwnPropertyDescriptor(g,g.length-1);return!(!f||f.get)}function i(e){e.g&&w(3,JSON.stringify(x(e)))}var j={};Oa("ES5",{J:function(e,g){var f=Array.isArray(e),h=function(l,o){if(l){for(var m=Array(o.length),n=0;n<o.length;n++)Object.defineProperty(m,""+n,a(n,!0));return m}var p=Fb(o);delete p[t];for(var q=_(p),r=0;r<q.length;r++){var s=q[r];p[s]=a(s,l||!!p[s].enumerable)}return Object.create(Object.getPrototypeOf(o),p)}(f,e),k={i:f?5:4,A:g?g.A:fa(),P:!1,I:!1,D:{},l:g,t:e,k:h,o:null,g:!1,C:!1};return Object.defineProperty(h,t,{value:k,writable:!0}),h},S:function(e,g,f){f?L(g)&&g[t].A===e&&b(e.p):(e.u&&function h(k){if(k&&"object"==typeof k){var l=k[t];if(l){var o=l.t,m=l.k,n=l.D,p=l.i;if(4===p)R(m,function(u){u!==t&&(void 0!==o[u]||X(o,u)?n[u]||h(m[u]):(n[u]=!0,G(l)))}),R(o,function(u){void 0!==m[u]||X(m,u)||(n[u]=!1,G(l))});else if(5===p){if(d(l)&&(G(l),n.length=!0),m.length<o.length)for(var q=m.length;q<o.length;q++)n[q]=!1;else for(var r=o.length;r<m.length;r++)n[r]=!0;for(var s=Math.min(m.length,o.length),v=0;v<s;v++)void 0===n[v]&&h(m[v])}}}}(e.p[0]),b(e.p))},K:function(e){return 4===e.i?c(e):d(e)}})}function Bb(){function a(d){if(!K(d))return d;if(Array.isArray(d))return d.map(a);if(ra(d))return new Map(Array.from(d.entries()).map(function(e){return[e[0],a(e[1])]}));if(sa(d))return new Set(Array.from(d).map(a));var i=Object.create(Object.getPrototypeOf(d));for(var j in d)i[j]=a(d[j]);return i}function b(d){return L(d)?a(d):d}var c="add";Oa("Patches",{$:function(d,i){return i.forEach(function(j){for(var e=j.path,g=j.op,f=d,h=0;h<e.length-1;h++)"object"!=typeof(f=qa(f,e[h]))&&w(15,e.join("/"));var k=W(f),l=a(j.value),o=e[e.length-1];switch(g){case"replace":switch(k){case 2:return f.set(o,l);case 3:w(16);default:return f[o]=l}case c:switch(k){case 1:return f.splice(o,0,l);case 2:return f.set(o,l);case 3:return f.add(l);default:return f[o]=l}case"remove":switch(k){case 1:return f.splice(o,1);case 2:return f.delete(o);case 3:return f.delete(j.value);default:return delete f[o]}default:w(17,g)}}),d},R:function(d,i,j,e){switch(d.i){case 0:case 4:case 2:return function(g,f,h,k){var l=g.t,o=g.o;R(g.D,function(m,n){var p=qa(l,m),q=qa(o,m),r=n?X(l,m)?"replace":c:"remove";if(p!==q||"replace"!==r){var s=f.concat(m);h.push("remove"===r?{op:r,path:s}:{op:r,path:s,value:q}),k.push(r===c?{op:"remove",path:s}:"remove"===r?{op:c,path:s,value:b(p)}:{op:"replace",path:s,value:b(p)})}})}(d,i,j,e);case 5:case 1:return function(g,f,h,k){var l=g.t,o=g.D,m=g.o;if(m.length<l.length){var n=[m,l];l=n[0],m=n[1];var p=[k,h];h=p[0],k=p[1]}for(var q=0;q<l.length;q++)if(o[q]&&m[q]!==l[q]){var r=f.concat([q]);h.push({op:"replace",path:r,value:b(m[q])}),k.push({op:"replace",path:r,value:b(l[q])})}for(var s=l.length;s<m.length;s++){var v=f.concat([s]);h.push({op:c,path:v,value:b(m[s])})}l.length<m.length&&k.push({op:"replace",path:f.concat(["length"]),value:l.length})}(d,i,j,e);case 3:return function(g,f,h,k){var l=g.t,o=g.o,m=0;l.forEach(function(n){if(!o.has(n)){var p=f.concat([m]);h.push({op:"remove",path:p,value:n}),k.unshift({op:c,path:p,value:n})}m++}),m=0,o.forEach(function(n){if(!l.has(n)){var p=f.concat([m]);h.push({op:c,path:p,value:n}),k.unshift({op:"remove",path:p,value:n})}m++})}(d,i,j,e)}},M:function(d,i,j,e){j.push({op:"replace",path:[],value:i}),e.push({op:"replace",path:[],value:d.t})}})}function Cb(){function a(g,f){function h(){this.constructor=g}i(g,f),g.prototype=(h.prototype=f.prototype,new h())}function b(g){g.o||(g.D=new Map(),g.o=new Map(g.t))}function c(g){g.o||(g.o=new Set(),g.t.forEach(function(f){if(K(f)){var h=ga(g.A.h,f,g);g.p.set(f,h),g.o.add(h)}else g.o.add(f)}))}function d(g){g.g&&w(3,JSON.stringify(x(g)))}var i=function(g,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,k){h.__proto__=k}||function(h,k){for(var l in k)k.hasOwnProperty(l)&&(h[l]=k[l])})(g,f)},j=function(){function g(h,k){return this[t]={i:2,l:k,A:k?k.A:fa(),P:!1,I:!1,o:void 0,D:void 0,t:h,k:this,C:!1,g:!1},this}a(g,Map);var f=g.prototype;return Object.defineProperty(f,"size",{get:function(){return x(this[t]).size}}),f.has=function(h){return x(this[t]).has(h)},f.set=function(h,k){var l=this[t];return d(l),x(l).has(h)&&x(l).get(h)===k||(b(l),G(l),l.D.set(h,!0),l.o.set(h,k),l.D.set(h,!0)),this},f.delete=function(h){if(!this.has(h))return!1;var k=this[t];return d(k),b(k),G(k),k.D.set(h,!1),k.o.delete(h),!0},f.clear=function(){var h=this[t];d(h),x(h).size&&(b(h),G(h),h.D=new Map(),R(h.t,function(k){h.D.set(k,!1)}),h.o.clear())},f.forEach=function(h,k){var l=this;x(this[t]).forEach(function(o,m){h.call(k,l.get(m),m,l)})},f.get=function(h){var k=this[t];d(k);var l=x(k).get(h);if(k.I||!K(l))return l;if(l!==k.t.get(h))return l;var o=ga(k.A.h,l,k);return b(k),k.o.set(h,o),o},f.keys=function(){return x(this[t]).keys()},f.values=function(){var h,k=this,l=this.keys();return(h={})[wa]=function(){return k.values()},h.next=function(){var o=l.next();return o.done?o:{done:!1,value:k.get(o.value)}},h},f.entries=function(){var h,k=this,l=this.keys();return(h={})[wa]=function(){return k.entries()},h.next=function(){var o=l.next();if(o.done)return o;var m=k.get(o.value);return{done:!1,value:[o.value,m]}},h},f[wa]=function(){return this.entries()},g}(),e=function(){function g(h,k){return this[t]={i:3,l:k,A:k?k.A:fa(),P:!1,I:!1,o:void 0,t:h,k:this,p:new Map(),g:!1,C:!1},this}a(g,Set);var f=g.prototype;return Object.defineProperty(f,"size",{get:function(){return x(this[t]).size}}),f.has=function(h){var k=this[t];return d(k),k.o?!!k.o.has(h)||!(!k.p.has(h)||!k.o.has(k.p.get(h))):k.t.has(h)},f.add=function(h){var k=this[t];return d(k),this.has(h)||(c(k),G(k),k.o.add(h)),this},f.delete=function(h){if(!this.has(h))return!1;var k=this[t];return d(k),c(k),G(k),k.o.delete(h)||!!k.p.has(h)&&k.o.delete(k.p.get(h))},f.clear=function(){var h=this[t];d(h),x(h).size&&(c(h),G(h),h.o.clear())},f.values=function(){var h=this[t];return d(h),c(h),h.o.values()},f.entries=function(){var h=this[t];return d(h),c(h),h.o.entries()},f.keys=function(){return this.values()},f[wa]=function(){return this.values()},f.forEach=function(h,k){for(var l=this.values(),o=l.next();!o.done;)h.call(k,o.value,o.value,this),o=l.next()},g}();Oa("MapSet",{T:function(g,f){return new j(g,f)},F:function(g,f){return new e(g,f)}})}function uc(){Ab(),Cb(),Bb()}function vc(a){return a}function wc(a){return a}var Db,Z,Ua="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),xc="undefined"!=typeof Map,yc="undefined"!=typeof Set,Eb="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Va=Ua?Symbol.for("immer-nothing"):((Db={})["immer-nothing"]=!0,Db),Wa=Ua?Symbol.for("immer-draftable"):"__$immer_draftable",t=Ua?Symbol.for("immer-state"):"__$immer_state",wa="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",zc={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(a){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+a},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(a){return"Cannot apply patch, path doesn't resolve: "+a},16:'Sets cannot have "replace" patches.',17:function(a){return"Unsupported patch operation: "+a},18:function(a){return"The plugin for '"+a+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+a+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(a){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+a+"'"},22:function(a){return"'current' expects a draft, got: "+a},23:function(a){return"'original' expects a draft, got: "+a}},_="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,Fb=Object.getOwnPropertyDescriptors||function(a){var b={};return _(a).forEach(function(c){b[c]=Object.getOwnPropertyDescriptor(a,c)}),b},Gb={},$={get:function(a,b){if(b===t)return a;var c=x(a);if(!X(c,b))return function(i,j,e){var g,f=xb(j,e);return f?"value"in f?f.value:null===(g=f.get)||void 0===g?void 0:g.call(i.k):void 0}(a,c,b);var d=c[b];return a.I||!K(d)?d:d===Sa(a.t,b)?(Ta(a),a.o[b]=ga(a.A.h,d,a)):d},has:function(a,b){return b in x(a)},ownKeys:function(a){return Reflect.ownKeys(x(a))},set:function(a,b,c){var d=xb(x(a),b);if(null==d?void 0:d.set)return d.set.call(a.k,c),!0;if(!a.P){var i=Sa(x(a),b),j=null==i?void 0:i[t];if(j&&j.t===c)return a.o[b]=c,a.D[b]=!1,!0;if(ub(c,i)&&(void 0!==c||X(a.t,b)))return!0;Ta(a),G(a)}return a.o[b]=c,a.D[b]=!0,!0},deleteProperty:function(a,b){return void 0!==Sa(a.t,b)||b in a.t?(a.D[b]=!1,Ta(a),G(a)):delete a.D[b],a.o&&delete a.o[b],!0},getOwnPropertyDescriptor:function(a,b){var c=x(a),d=Reflect.getOwnPropertyDescriptor(c,b);return d?{writable:!0,configurable:1!==a.i||"length"!==b,enumerable:d.enumerable,value:c[b]}:d},defineProperty:function(){w(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){w(12)}},xa={};R($,function(a,b){xa[a]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),xa.deleteProperty=function(a,b){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(b))&&w(13),$.deleteProperty.call(this,a[0],b)},xa.set=function(a,b,c){return"production"!==process.env.NODE_ENV&&"length"!==b&&isNaN(parseInt(b))&&w(14),$.set.call(this,a[0],b,c,a[0])};var Hb=function(){function a(c){this.O=Eb,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==c?void 0:c.useProxies)&&this.setUseProxies(c.useProxies),"boolean"==typeof(null==c?void 0:c.autoFreeze)&&this.setAutoFreeze(c.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var b=a.prototype;return b.produce=function(c,d,i){if("function"==typeof c&&"function"!=typeof d){var j=d;d=c;var e=this;return function(l){var o=this;void 0===l&&(l=j);for(var m=arguments.length,n=Array(m>1?m-1:0),p=1;p<m;p++)n[p-1]=arguments[p];return e.produce(l,function(q){var r;return(r=d).call.apply(r,[o,q].concat(n))})}}var g;if("function"!=typeof d&&w(6),void 0!==i&&"function"!=typeof i&&w(7),K(c)){var f=vb(this),h=ga(this,c,void 0),k=!0;try{g=d(h),k=!1}finally{k?ta(f):Qa(f)}return"undefined"!=typeof Promise&&g instanceof Promise?g.then(function(l){return Pa(f,i),Ra(l,f)},function(l){throw ta(f),l}):(Pa(f,i),Ra(g,f))}if(!c||"object"!=typeof c)return(g=d(c))===Va?void 0:(void 0===g&&(g=c),this.N&&Ma(g,!0),g);w(21,c)},b.produceWithPatches=function(c,d){var i,j,e=this;return"function"==typeof c?function(g){for(var f=arguments.length,h=Array(f>1?f-1:0),k=1;k<f;k++)h[k-1]=arguments[k];return e.produceWithPatches(g,function(l){return c.apply(void 0,[l].concat(h))})}:[this.produce(c,d,function(g,f){i=g,j=f}),i,j]},b.createDraft=function(c){K(c)||w(8),L(c)&&(c=yb(c));var d=vb(this),i=ga(this,c,void 0);return i[t].C=!0,Qa(d),i},b.finishDraft=function(c,d){var i=c&&c[t];"production"!==process.env.NODE_ENV&&(i&&i.C||w(9),i.I&&w(10));var j=i.A;return Pa(j,d),Ra(void 0,j)},b.setAutoFreeze=function(c){this.N=c},b.setUseProxies=function(c){c&&!Eb&&w(20),this.O=c},b.applyPatches=function(c,d){var i;for(i=d.length-1;i>=0;i--){var j=d[i];if(0===j.path.length&&"replace"===j.op){c=j.value;break}}var e=S("Patches").$;return L(c)?e(c,d):this.produce(c,function(g){return e(g,d.slice(i+1))})},a}(),J=new Hb(),ya=J.produce,Ac=J.produceWithPatches.bind(J),Bc=J.setAutoFreeze.bind(J),Cc=J.setUseProxies.bind(J),Dc=J.applyPatches.bind(J),Ec=J.createDraft.bind(J),Fc=J.finishDraft.bind(J);const Zd=ya;var Fa={};try{Fa.WeakMap=WeakMap}catch(a){Fa.WeakMap=function(b,c){"use strict";var d=c.defineProperty,i=c.hasOwnProperty,j=e.prototype;return j.delete=function(f){return this.has(f)&&delete f[this._]},j.get=function(f){return this.has(f)?f[this._]:void 0},j.has=function(f){return i.call(f,this._)},j.set=function(f,h){return d(f,this._,{configurable:!0,value:h}),this},e;function e(f){d(this,"_",{value:"_@ungap/weakmap"+b++}),f&&f.forEach(g,this)}function g(f){this.set(f[0],f[1])}}(Math.random(),Object)}const Ga=Fa.WeakMap;var Q="-"+Math.random().toFixed(6)+"%",oa=!1;try{(function(a,b,c){return b in a&&(a.innerHTML="<p "+c+'="'+Q+'"></p>',a[b].childNodes[0].getAttribute(c)==Q)})(document.createElement("template"),"content","tabindex")||(Q="_dt: "+Q.slice(1,-1)+";",oa=!0)}catch(a){}var ea="<!--"+Q+"-->",gb=8,ac=11,hb=1,ib=3,Ha=/^(?:style|textarea)$/i,jb=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;function kb(a){return a.join(ea).replace(cc,gc).replace(bc,ec)}var pa=" \\f\\n\\r\\t",lb="[^"+pa+`\\/>"'=]+`,Ia="["+pa+"]+"+lb,mb="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",nb=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+lb.replace("\\/","")+"))?)",bc=new RegExp(mb+Ia+nb+"+)(["+pa+"]*/?>)","g"),cc=new RegExp(mb+Ia+nb+"*)(["+pa+"]*/>)","g"),dc=new RegExp("("+Ia+`\\s*=\\s*)(['"]?)`+ea+"\\2","gi");function ec(a,b,c,d){return"<"+b+c.replace(dc,fc)+d}function fc(a,b,c){return b+(c||'"')+Q+(c||'"')}function gc(a,b,c){return jb.test(b)?a:"<"+b+c+"></"+b+">"}const{isArray:ha}=Array,{indexOf:Uc,slice:da}=[];const Ja=a=>({get:b=>a.get(b),set:(b,c)=>(a.set(b,c),c)});const Vc=1,Rb=111,Wc=({firstChild:a,lastChild:b})=>{const c=document.createRange();return c.setStartAfter(a),c.setEndAfter(b),c.deleteContents(),a};const ca=(a,b)=>a.nodeType===Rb?1/b<0?b?Wc(a):a.lastChild:b?a.valueOf():a.firstChild:a,Gc=a=>{const{childNodes:b}=a,{length:c}=b;if(c<2)return c?b[0]:a;const d=da.call(b,0),i=d[0],j=d[c-1];return{ELEMENT_NODE:Vc,nodeType:Rb,firstChild:i,lastChild:j,valueOf(){if(b.length!==c){let e=0;for(;e<c;)a.appendChild(d[e++])}return a}}};var Yb=function(a){"use strict";var b="fragment",c="template",d="content"in e(c),i=d?function(f){var h=e(c);return h.innerHTML=f,h.content}:function(f){var h=e(b),k=e(c),l=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(f)){var o=RegExp.$1;k.innerHTML="<table>"+f+"</table>",l=k.querySelectorAll(o)}else k.innerHTML=f,l=k.childNodes;return j(h,l),h};return function f(h,k){return(k==="svg"?g:i)(h)};function j(f,h){for(var k=h.length;k--;)f.appendChild(h[0])}function e(f){return f===b?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",f)}function g(f){var h=e(b),k=e("div");return k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+f+"</svg>",j(h,k.firstChild.childNodes),h}}(document);const eb=Yb;const ba=(a,b,c,d,i)=>{const j=c.length;let e=b.length,g=j,f=0,h=0,k=null;for(;f<e||h<g;)if(e===f){const l=g<j?h?d(c[h-1],-0).nextSibling:d(c[g-h],0):i;for(;h<g;)a.insertBefore(d(c[h++],1),l)}else if(g===h)for(;f<e;)(!k||!k.has(b[f]))&&a.removeChild(d(b[f],-1)),f++;else if(b[f]===c[h])f++,h++;else if(b[e-1]===c[g-1])e--,g--;else if(b[f]===c[g-1]&&c[h]===b[e-1]){const l=d(b[--e],-1).nextSibling;a.insertBefore(d(c[h++],1),d(b[f++],-1).nextSibling),a.insertBefore(d(c[--g],1),l),b[e]=c[g]}else{if(!k){k=new Map();let l=h;for(;l<g;)k.set(c[l],l++)}if(k.has(b[f])){const l=k.get(b[f]);if(h<l&&l<g){let o=f,m=1;for(;++o<e&&o<g&&k.get(b[o])===l+m;)m++;if(m>l-h){const n=d(b[f],0);for(;h<l;)a.insertBefore(d(c[h++],1),n)}else a.replaceChild(d(c[h++],1),d(b[f++],-1))}else f++}else a.removeChild(d(b[f++],-1))}return c};var Zb=function(a,b,c,d,i){var j=i in a,e=a.createDocumentFragment();e[b](a[d]("g")),e[b](a[d](""));var g=j?a[i](e,!0):e[c](!0);return g.childNodes.length<2?function f(h,k){for(var l=h[c](),o=h.childNodes||[],m=o.length,n=0;k&&n<m;n++)l[b](f(o[n],k));return l}:j?a[i]:function(f,h){return f[c](!!h)}}(document,"appendChild","cloneNode","createTextNode","importNode");const _b=Zb;var $b="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};const fb=$b;var mc=oa?function(a,b){var c=b.join(" ");return b.slice.call(a,0).sort(function(d,i){return c.indexOf(d.name)<=c.indexOf(i.name)?-1:1})}:function(a,b){return b.slice.call(a,0)};function ob(a,b){for(var c=b.length,d=0;d<c;)a=a.childNodes[b[d++]];return a}function Ka(a,b,c,d){for(var i=a.childNodes,j=i.length,e=0;e<j;){var g=i[e];switch(g.nodeType){case hb:var f=d.concat(e);nc(g,b,c,f),Ka(g,b,c,f);break;case gb:var h=g.textContent;if(h===Q)c.shift(),b.push(Ha.test(a.nodeName)?sb(a,d):oc(g,d.concat(e)));else switch(h.slice(0,2)){case"/*":if(h.slice(-2)!=="*/")break;case"👻":a.removeChild(g),e--,j--}break;case ib:Ha.test(a.nodeName)&&fb.call(g.textContent)===ea&&(c.shift(),b.push(sb(a,d)));break}e++}}function nc(a,b,c,d){for(var i=a.attributes,j=[],e=[],g=mc(i,c),f=g.length,h=0;h<f;){var k=g[h++],l=k.value===Q,o;if(l||1<(o=k.value.split(ea)).length){var m=k.name;if(j.indexOf(m)<0){j.push(m);var n=c.shift().replace(l?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+m+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),p=i[n]||i[n.toLowerCase()];if(l)b.push(rb(p,d,n,null));else{for(var q=o.length-2;q--;)c.shift();b.push(rb(p,d,n,o))}}e.push(k)}}f=e.length,h=0;for(var r=0<f&&oa&&!("ownerSVGElement"in a);h<f;){var s=e[h++];r&&(s.value=""),a.removeAttribute(s.name)}var v=a.nodeName;if(/^script$/i.test(v)){var u=document.createElement(v);for(f=i.length,h=0;h<f;)u.setAttributeNode(i[h++].cloneNode(!0));u.textContent=a.textContent,a.parentNode.replaceChild(u,a)}}function oc(a,b){return{type:"any",node:a,path:b}}function rb(a,b,c,d){return{type:"attr",node:a,path:b,name:c,sparse:d}}function sb(a,b){return{type:"text",node:a,path:b}}const hc=lc;var pb=Ja(new Ga());function ic(a,b){var c=(a.convert||kb)(b),d=a.transform;d&&(c=d(c));var i=eb(c,a.type);qb(i);var j=[];return Ka(i,j,b.slice(0),[]),{content:i,updates:function(e){for(var g=[],f=j.length,h=0,k=0;h<f;){var l=j[h++],o=ob(e,l.path);switch(l.type){case"any":g.push({fn:a.any(o,[]),sparse:!1});break;case"attr":var m=l.sparse,n=a.attribute(o,l.name,l.node);m===null?g.push({fn:n,sparse:!1}):(k+=m.length-2,g.push({fn:n,sparse:!0,values:m}));break;case"text":g.push({fn:a.text(o),sparse:!1}),o.textContent="";break}}return f+=k,function(){var p=arguments.length;if(f!==p-1)throw new Error(p-1+" values instead of "+f+`
`+b.join("${value}"));for(var q=1,r=1;q<p;){var s=g[q-r];if(s.sparse){var v=s.values,u=v[0],A=1,y=v.length;for(r+=y-2;A<y;)u+=arguments[q++]+v[A++];s.fn(u)}else s.fn(arguments[q++])}return e}}}}function jc(a,b){var c=pb.get(b)||pb.set(b,ic(a,b));return c.updates(_b.call(document,c.content,!0))}var kc=[];function lc(a){var b=kc,c=qb;return function(d){return b!==d&&(c=jc(a,b=d)),c.apply(null,arguments)}}function qb(a){for(var b=a.childNodes,c=b.length;c--;){var d=b[c];d.nodeType!==1&&fb.call(d.textContent).length===0&&a.removeChild(d)}}var pc=function(){"use strict";var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,b=/([^A-Z])([A-Z]+)/g;return function e(g,f){return"ownerSVGElement"in g?d(g,f):j(g.style,!1)};function c(e,g,f){return g+"-"+f.toLowerCase()}function d(e,g){var f;return g?f=g.cloneNode(!0):(e.setAttribute("style","--hyper:style;"),f=e.getAttributeNode("style")),f.value="",e.setAttributeNode(f),j(f,!0)}function i(e){var g,f=[];for(g in e)f.push(g.replace(b,c),":",e[g],";");return f.join("")}function j(e,g){var f,h;return function(k){var l,o,m,n;switch(typeof k){case"object":if(k){if(f==="object"){if(!g){if(h!==k)for(o in h)o in k||(e[o]="")}}else g?e.value="":e.cssText="";l=g?{}:e;for(o in k)n=k[o],m=typeof n==="number"&&!a.test(o)?n+"px":n,!g&&/^--/.test(o)?l.setProperty(o,m):l[o]=m;f="object",g?e.value=i(h=l):h=k;break}default:h!=k&&(f="string",h=k,g?e.value=k||"":e.cssText=k||"");break}}}}();const qc=pc;const Mc=a=>b=>{for(const c in b){const d=c==="role"?c:`aria-${c}`,i=b[c];i==null?a.removeAttribute(d):a.setAttribute(d,i)}},Pb=(a,b)=>{let c,d=!0;const i=document.createAttributeNS(null,b);return j=>{c!==j&&(c=j,c==null?d||(a.removeAttributeNode(i),d=!0):(i.value=j,d&&(a.setAttributeNodeNS(i),d=!1)))}},Nc=({dataset:a})=>b=>{for(const c in b){const d=b[c];d==null?delete a[c]:a[c]=d}},Oc=(a,b)=>{let c,d=b.slice(2);return!(b in a)&&b.toLowerCase()in a&&(d=d.toLowerCase()),i=>{const j=ha(i)?i:[i,!1];c!==j[0]&&(c&&a.removeEventListener(d,c,j[1]),(c=j[0])&&a.addEventListener(d,c,j[1]))}},Pc=a=>b=>{typeof b==="function"?b(a):b.current=a},Qb=(a,b)=>c=>{a[b]=c},Ce=a=>{let b;return c=>{b!=c&&(b=c,a.textContent=c==null?"":c)}};const Qc=(a,b)=>{let c;return d=>{c!==d&&(c=d,a[b]!==d&&(d==null?(a[b]="",a.removeAttribute(b)):a[b]=d))}},Rc=/^(?:form|list)$/i,Sc=(a,b)=>a.ownerDocument.createTextNode(b);function za(a){return this.type=a,hc(this)}za.prototype={attribute(a,b,c){const d=this.type==="svg";switch(b){case"class":if(d)return Pb(a,b,d);b="className";case"props":return Qb(a,b);case"aria":return Mc(a);case"style":return qc(a,c,d);case"ref":return Pc(a);case".dataset":return Nc(a);default:return b.slice(0,1)==="."?Qb(a,b.slice(1)):b.slice(0,2)==="on"?Oc(a,b):b in a&&!(d||Rc.test(b))?Qc(a,b):Pb(a,b,d)}},any(a,b){const{type:c}=this;let d=!1,i;const j=e=>{switch(typeof e){case"string":case"number":case"boolean":d?i!==e&&(i=e,b[0].textContent=e):(d=!0,i=e,b=ba(a.parentNode,b,[Sc(a,e)],ca,a));break;case"function":j(e(a));break;case"object":case"undefined":if(e==null){d=!1,b=ba(a.parentNode,b,[],ca,a);break}default:d=!1,i=e;if(ha(e))if(e.length===0)b.length&&(b=ba(a.parentNode,b,[],ca,a));else switch(typeof e[0]){case"string":case"number":case"boolean":j(String(e));break;case"function":j(e.map(Tc,a));break;case"object":ha(e[0])&&(e=e.concat.apply([],e));default:b=ba(a.parentNode,b,e,ca,a);break}else"ELEMENT_NODE"in e?b=ba(a.parentNode,b,e.nodeType===11?da.call(e.childNodes):[e],ca,a):"text"in e?j(String(e.text)):"any"in e?j(e.any):"html"in e?b=ba(a.parentNode,b,da.call(eb([].concat(e.html).join(""),c).childNodes),ca,a):"length"in e&&j(da.call(e));break}};return j},text(a){let b;const c=d=>{if(b!==d){b=d;const i=typeof d;i==="object"&&d?"text"in d?c(String(d.text)):"any"in d?c(d.any):"html"in d?c([].concat(d.html).join("")):"length"in d&&c(da.call(d).join("")):i==="function"?c(d(a)):a.textContent=d==null?"":d}};return c}};function Tc(a){return a(this)}const{create:Ib,freeze:Hc,keys:Ic}=Object,Jc=za.prototype,Jb=Ja(new Ga()),Kb=a=>({html:Lb("html",a),svg:Lb("svg",a),render(b,c){const d=typeof c==="function"?c():c,i=Jb.get(b)||Jb.set(b,ia()),j=d instanceof Ba?Aa(a,i,d):d;return j!==i.wire&&(i.wire=j,b.textContent="",b.appendChild(j.valueOf())),b}}),ia=()=>({stack:[],entry:null,wire:null}),Lb=(a,b)=>{const c=Ja(new Ga()),d=j=>function(){return Aa(b,j,i.apply(null,arguments))};return i.for=(j,e)=>{const g=c.get(j)||c.set(j,Ib(null));return g[e]||(g[e]=d(ia()))},i.node=function(){return Aa(b,ia(),i.apply(null,arguments)).valueOf()},i;function i(){return new Ba(a,Lc.apply(null,arguments))}},Aa=(a,b,{type:c,template:d,values:i})=>{const{length:j}=i;Mb(a,b,i,j);let{entry:e}=b;if(!e||(e.template!==d||e.type!==c)){const g=new a(c);b.entry=e={type:c,template:d,tag:g,wire:Gc(g(d,...i))}}else e.tag(d,...i);return e.wire},Mb=(a,{stack:b},c,d)=>{for(let i=0;i<d;i++){const j=c[i];j instanceof Kc?c[i]=Aa(a,b[i]||(b[i]=ia()),j):ha(j)?Mb(a,b[i]||(b[i]=ia()),j,j.length):b[i]=null}d<b.length&&b.splice(d)};Hc(Ba);function Ba(a,b){this.type=a,this.template=b.shift(),this.values=b}const Kc=Ba,he=a=>{const b=Ib(Jc);return Ic(a).forEach(d=>{b[d]=a[d](b[d]||(d==="convert"?kb:String))}),c.prototype=b,Kb(c);function c(){return za.apply(this,arguments)}};const{render:Nb,html:aa,svg:Ob}=Kb(za);function Lc(){let a=[],b=0,{length:c}=arguments;for(;b<c;)a.push(arguments[b++]);return a}const dd=function a(b){const{worldData:c,character:d}=b,i={plains:[189,131,0],mountains:[125,125,125],forests:[4,109,4],water:[0,53,158]};function j(e){if(!e)return;const g=i[e.biome],f=[];for(let h=0;h<g.length;h++){const k=g[h]+e.elevation*3,l=k>255?255:k;f.push(l)}return f.join(", ")}return aa`
        ${c.map((e,g)=>aa`
                <div class="row" data-i=${g}>
                    ${e.map((f,h)=>aa`
                            <div class="tile" style="${"background-color:rgb("+j(f)+")"}" data-i=${h}>
                                ${gd(d,h,g)}
                            </div>
                        `)}
                </div>
            `)}

`};function gd(a,b,c){return a.posX===b&&a.posY===c?Ob`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="meeple" style="height:20px; width:20px;vertical-align:top;position:relative;z-index:10"><path d="M0 0h512v512H0z" fill="#000000" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M192.215 39.565c-48.32 6.48-43.031 58.948-42.874 75.82l93.895 13.622c1.004-35.647 5.621-59.868 13.545-76.27 2.186-4.523 4.704-8.455 7.469-11.836zm107.012 2.48c-1.17.023-2.36.098-3.57.226-8.898.937-15.873 4.232-22.669 18.296-6.795 14.065-11.916 39.331-12.095 80.59l-.026 5.95-5.484 2.306c-50.104 21.083-82.1 39.796-100.16 55.334-18.06 15.538-21.362 26.305-19.541 34.088 1.82 7.783 10.734 16.375 25.353 23.44 14.62 7.064 33.96 12.409 52.951 15.634l11.293 1.918-83.045 192.608 120.118-32.106 51.136-112.484 51.045 86.37 113.43-30.929-86.887-142.223 10.647-3.617c15.087-5.126 32.096-12.698 45.673-21.45 13.578-8.753 23.156-18.91 25.407-26.64 1.125-3.864.992-7.055-1.028-11.146-2.02-4.09-6.362-9.116-14.296-14.488-15.869-10.744-45.623-22.39-93.485-32.809l-6.672-1.453-.398-6.816c-.762-13.052-6.589-35.803-17.293-53.27-9.366-15.284-21.176-26.136-36.961-27.242a38.595 38.595 0 0 0-3.443-.086zm-170.685 87.41c-79.404 44.697-85.83 54.663-86.757 71.6-2.209 40.397 42.597 46.791 89.698 59.957-6.026-5.765-11.447-10.033-13.329-18.075-3.82-16.327 4.783-34.158 25.328-51.834 17.067-14.684 43.279-30.404 80.907-47.62zM93.291 271.788c-22.445 48.26-38.283 103.023-59.254 153.977l87.723 43.328 17.77-35.852 57.154-132.556zm222.283 94.963l-15.752 34.648 43.543 12.375z" fill="#fff" fill-opacity="1"></path></g></svg>`:""}const ed=function a(b){return aa`
    <div class="header-spacer"></div>
    <header>
        <div class="intro">Just a test to see if re-rendering 1000+ views at the same time causes major issues in rendering. Uses Perlin noise to build the map. Each map tile is a DOM node with logic.</div>
        <button onclick=${()=>{cd(b)}}>Next</button>
    </header>
`};const fd=document.querySelector("main");function Ea(a){Nb(fd,aa`
            ${ed(a)}
            ${dd(a)}
        `)}const B=[];function Yc(a){B.push(a),Ea(a)}const qf=function a(b){B[B.length-1];const c=ya(B[B.length-1],b);return Ea(c),B.push(c),!0},Sb=function a(b){return new Promise((c,d)=>{try{const i=ya(B[B.length-1],b);Ea(i),B.push(i),c()}catch(i){d(i)}})};function rf(){return B[B.length-1]}function sf(){return B}const tf=function a(){return B.length<=1?void 0:(B.pop(),Ea(B[B.length-1]),!0)};const Da={n:{x:0,y:-1},ne:{x:1,y:-1},e:{x:1,y:0},se:{x:1,y:1},s:{x:0,y:1},sw:{x:-1,y:1},w:{x:-1,y:0},nw:{x:-1,y:-1}},Tb={n:["nw","n","ne"],ne:["n","ne","e"],e:["ne","e","se"],se:["e","se","s"],s:["se","s","sw"],sw:["s","sw","w"],w:["sw","w","nw"],nw:["w","nw","n"]},Y=[{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}],Ub={n:["nw","ne"],ne:["n","e"],e:["ne","se"],se:["e","s"],s:["se","sw"],sw:["s","w"],w:["sw","nw"],nw:["w","n"]};async function Ue(a){const{character:b,worldData:c}=a,{posX:d,posY:i,direction:j}=b;let e=a.character.onABoat,g=_c(j,d,i,c),f=d+Da[g].x,h=i+Da[g].y;const k=await ja(f,h,a.character.rng1,a.character.rng2,a.worldData);if(!e&&Math.ceil(k*100)===1&&Math.ceil(a.character.elevation*100)!==1)if(Math.random()>.8)e=!0,console.log("you find passage on a boat, fashion a raft, steal a boat, etc");else{console.log("A body of water forces you to change direction");const l=[];for(let m=1;m<Y.length;m++){const n=await ja(Y[m].x,Y[m].y,a.character.rng1,a.character.rng2,a.worldData);Math.ceil(n*100)>1&&l.push(Y[m])}const o=l[Math.floor(Math.random()*l.length)];console.log(o),f=d+o.x,h=i+o.y,g=Ub[g][Math.floor(Math.random()*Ub[g].length)]}f<0&&(f=0,g="se"),h<0&&(h=0,g="se");if(e){const l=await ja(f,h,a.character.rng1,a.character.rng2,a.worldData);console.log(Math.ceil(l*100)),Math.ceil(l*100)>1&&(e=!1,console.log("You get out of the boat"))}await Sb(l=>{l.character.elevation=Xa(f,h,l.character.rng1,l.character.rng2,l.worldData),l.character.direction=g,l.character.posX=f,l.character.posY=h,l.character.onABoat=e;for(let o=0;o<Y.length;o++){const m=f+Y[o].x,n=h+Y[o].y;if(!l.worldData[n]){l.worldData[n]=[];let p=0;for(;p<m;)l.worldData[n][p]=void 0,p++}if(!l.worldData[n][m]){if(l.worldData[n].length<m){let r=l.worldData[n].length;for(;r<m;)l.worldData[n][r]=void 0,r++}const p=Xa(m,n,l.character.rng1,l.character.rng2,l.worldData),q=Ya(p);l.worldData[n][m]=q}}})}function _c(a,b,c,d){let i=Tb[a],j=a;Math.random()>.8&&(j=i[Math.floor(Math.random()*i.length)]);if(!Vb(j,b,c,d)){let e=i,g=0;for(;g<5;)if(e[g]===void 0){if(Vb(e[g],b,c,d)){j=e[g];break}}else e=Tb[a[g-1]],g=0}return j}async function Vb(a,b,c,d){const i=b+Da[a].x,j=c+Da[a].y;return d&&d[j]&&d[j][i]?!0:!1}function ja(a,b,c,d,i){return new Promise((j,e)=>{try{const g=Xa(a,b,c,d,i);j(g)}catch(g){e(g)}})}function Xa(a,b,c,d,i){function j(l,o){return c.simplex2(l,o)/2+.5}function e(l,o){return d.simplex2(l,o)/2+.5}i[b]||(i[b]=[]);let g=a/100-.5,f=b/100-.5,h=1*j(1*g,1*f)+.5*j(2*g,2*f)+.25*j(4*g,4*f)+.13*j(8*g,8*f)+.06*j(16*g,16*f)+.03*j(32*g,32*f);h/=1+.5+.25+.13+.06+.03,h=Math.pow(h,5);let k=1*e(1*g,1*f)+.75*e(2*g,2*f)+.33*e(4*g,4*f)+.33*e(8*g,8*f)+.33*e(16*g,16*f)+.5*e(32*g,32*f);return k/=1+.75+.33+.33+.33+.5,h}function Ya(a){const b=$c();return b.elevation=Math.ceil(a*100),b.elevation===1?b.biome="water":b.elevation<4?b.biome="plains":b.elevation<12?b.biome="forests":b.biome="mountains",b.area=bd(),b.structure=ad(b.area),b}function $c(){return{travelLine:void 0,dayArrived:void 0,daysVisited:void 0,biome:void 0,subBiome:void 0,elevation:void 0,people:[],animals:[],monsters:[],items:[],structure:void 0,area:void 0}}const Wb=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,9,9,9,10];function Xb(a){const b=Wb[Math.floor(Math.random()*Wb.length)],c=10/a.length,d=Math.ceil(b/c);return a[d]}function Ve(a){let b}function ad(a){let b;a==="empty"?b=["empty","empty","empty","hovel","home","farm","inn","temple","cave","fortress"]:a==="village"?b=["hovel","hovels","home","homes","farm","farm","farm","farm","inn","shrine"]:a==="town"?b=["hovel","home","homes","homes","inn","inns","business","businesses","businesses","temple"]:a==="ruins"?b=["earthworks","earthworks","earthworks","earthworks","earthworks","carved stone","crumbling stone walls","cave","catacombs","ruined temple"]:b=["homes","homes","inns","inns","inns","businesses","businesses","temples","mansions","castle"];const c=Xb(b);return c}function bd(){const a=["empty","empty","empty","empty","empty","empty","village","town","ruins","city"],b=Xb(a);return b}function We(){}const Ca=function(a){var b={};function c(m,n,p){this.x=m,this.y=n,this.z=p}c.prototype.dot2=function(m,n){return this.x*m+this.y*n},c.prototype.dot3=function(m,n,p){return this.x*m+this.y*n+this.z*p};var d=[new c(1,1,0),new c(-1,1,0),new c(1,-1,0),new c(-1,-1,0),new c(1,0,1),new c(-1,0,1),new c(1,0,-1),new c(-1,0,-1),new c(0,1,1),new c(0,-1,1),new c(0,1,-1),new c(0,-1,-1)],i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],j=new Array(512),e=new Array(512);b.seed=function(m){m>0&&m<1&&(m*=65536),m=Math.floor(m),m<256&&(m|=m<<8);for(var n=0;n<256;n++){var p;n&1?p=i[n]^m&255:p=i[n]^m>>8&255,j[n]=j[n+256]=p,e[n]=e[n+256]=d[p%12]}},a?b.seed(a):b.seed(Math.random());var g=.5*(Math.sqrt(3)-1),f=(3-Math.sqrt(3))/6,h=1/3,k=1/6;b.simplex2=function(m,n){var p,q,r,s=(m+n)*g,v=Math.floor(m+s),u=Math.floor(n+s),A=(v+u)*f,y=m-v+A,C=n-u+A,M,D;y>C?(M=1,D=0):(M=0,D=1);var E=y-M+f,z=C-D+f,H=y-1+2*f,F=C-1+2*f;v&=255,u&=255;var N=e[v+j[u]],O=e[v+M+j[u+D]],P=e[v+1+j[u+1]],I=.5-y*y-C*C;I<0?p=0:(I*=I,p=I*I*N.dot2(y,C));var T=.5-E*E-z*z;T<0?q=0:(T*=T,q=T*T*O.dot2(E,z));var U=.5-H*H-F*F;return U<0?r=0:(U*=U,r=U*U*P.dot2(H,F)),70*(p+q+r)},b.simplex3=function(m,n,p){var q,r,s,v,u=(m+n+p)*h,A=Math.floor(m+u),y=Math.floor(n+u),C=Math.floor(p+u),M=(A+y+C)*k,D=m-A+M,E=n-y+M,z=p-C+M,H,F,N,O,P,I;D>=E?E>=z?(H=1,F=0,N=0,O=1,P=1,I=0):D>=z?(H=1,F=0,N=0,O=1,P=0,I=1):(H=0,F=0,N=1,O=1,P=0,I=1):E<z?(H=0,F=0,N=1,O=0,P=1,I=1):D<z?(H=0,F=1,N=0,O=0,P=1,I=1):(H=0,F=1,N=0,O=1,P=1,I=0);var T=D-H+k,U=E-F+k,Za=z-N+k,_a=D-O+2*k,$a=E-P+2*k,ab=z-I+2*k,bb=D-1+3*k,cb=E-1+3*k,db=z-1+3*k;A&=255,y&=255,C&=255;var hd=e[A+j[y+j[C]]],id=e[A+H+j[y+F+j[C+N]]],jd=e[A+O+j[y+P+j[C+I]]],kd=e[A+1+j[y+1+j[C+1]]],ka=.6-D*D-E*E-z*z;ka<0?q=0:(ka*=ka,q=ka*ka*hd.dot3(D,E,z));var la=.6-T*T-U*U-Za*Za;la<0?r=0:(la*=la,r=la*la*id.dot3(T,U,Za));var ma=.6-_a*_a-$a*$a-ab*ab;ma<0?s=0:(ma*=ma,s=ma*ma*jd.dot3(_a,$a,ab));var na=.6-bb*bb-cb*cb-db*db;return na<0?v=0:(na*=na,v=na*na*kd.dot3(bb,cb,db)),32*(q+r+s+v)};function l(m){return m*m*m*(m*(m*6-15)+10)}function o(m,n,p){return(1-p)*m+p*n}return b.perlin2=function(m,n){var p=Math.floor(m),q=Math.floor(n);m=m-p,n=n-q,p=p&255,q=q&255;var r=e[p+j[q]].dot2(m,n),s=e[p+j[q+1]].dot2(m,n-1),v=e[p+1+j[q]].dot2(m-1,n),u=e[p+1+j[q+1]].dot2(m-1,n-1),A=l(m);return o(o(r,v,A),o(s,u,A),l(n))},b.perlin3=function(m,n,p){var q=Math.floor(m),r=Math.floor(n),s=Math.floor(p);m=m-q,n=n-r,p=p-s,q=q&255,r=r&255,s=s&255;var v=e[q+j[r+j[s]]].dot3(m,n,p),u=e[q+j[r+j[s+1]]].dot3(m,n,p-1),A=e[q+j[r+1+j[s]]].dot3(m,n-1,p),y=e[q+j[r+1+j[s+1]]].dot3(m,n-1,p-1),C=e[q+1+j[r+j[s]]].dot3(m-1,n,p),M=e[q+1+j[r+j[s+1]]].dot3(m-1,n,p-1),D=e[q+1+j[r+1+j[s]]].dot3(m-1,n-1,p),E=e[q+1+j[r+1+j[s+1]]].dot3(m-1,n-1,p-1),z=l(m),H=l(n),F=l(p);return o(o(o(v,C,z),o(u,M,z),F),o(o(A,D,z),o(y,E,z),F),H)},b};const V={renown:0,currentDay:1,posX:3,posY:3,direction:"se",elevation:void 0};async function Xc(a){const b=[];for(let c=0;c<100;c++){b[c]=[];for(let d=0;d<100;d++){const i=await ja(d,c,a.rng1,a.rng2,b);a.posX===d&&a.posY===c&&(Math.ceil(i*100)===1&&(a.onABoat=!0,console.log("You are on a boat or clinging to wreckage")));const j=Ya(i);b[c][d]=j}}return b}async function cd(a){const b=[],c=Math.random(),d=Math.random(),i=Ca(c),j=Ca(d);for(let e=0;e<100;e++){b[e]=[];for(let g=0;g<100;g++){const f=await ja(g,e,i,j,b),h=Ya(f);b[e][g]=h}}await Sb(e=>{e.worldData=b})}window.onload=()=>{Zc()};async function Zc(){V.seed1=Math.random(),V.seed2=Math.random(),V.rng1=Ca(V.seed1),V.rng2=Ca(V.seed2);const a=await Xc(V),b={worldData:a,character:V};Yc(b)}}};return k$(17)})();
